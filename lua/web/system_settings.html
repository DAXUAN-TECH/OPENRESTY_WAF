<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统设置 - WAF管理</title>
    <link rel="stylesheet" href="/css/system_settings.css">
    <script src="/common.js"></script>
    <script src="/js/system_settings.js"></script>
</head>
<body>
    <div class="container">
        <h1>系统设置</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('whitelist')">系统访问白名单</button>
        </div>
        
        <div id="alert-container"></div>
        
        <!-- 系统访问白名单 -->
        <div id="whitelist-tab" class="tab-content active">
            <!-- 工具栏 -->
            <div class="toolbar">
                <div class="filters">
                    <select id="filter-status">
                        <option value="">全部状态</option>
                        <option value="1">已启用</option>
                        <option value="0">已禁用</option>
                    </select>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" onclick="applyFilters()">查询</button>
                    <button class="btn btn-secondary" onclick="resetFilters()">重置</button>
                    <button class="btn btn-primary" onclick="showAddModal()">添加IP</button>
                    <button class="btn btn-primary" onclick="loadWhitelist()">刷新</button>
                </div>
            </div>
            
            <!-- 白名单列表 -->
            <table id="whitelist-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>IP地址</th>
                        <th>说明</th>
                        <th>状态</th>
                        <th>创建时间</th>
                        <th>更新时间</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody id="whitelist-tbody">
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 20px;">加载中...</td>
                    </tr>
                </tbody>
            </table>
            
            <!-- 分页 -->
            <div class="pagination" id="whitelist-pagination"></div>
        </div>
    </div>
    
    <!-- 添加/编辑模态框 -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2 id="modal-title">添加IP</h2>
            <form id="edit-form" onsubmit="saveWhitelist(event)">
                <div class="form-group">
                    <label>IP地址 *</label>
                    <textarea id="edit-ip-address" placeholder="192.168.1.1 或 192.168.1.1,192.168.1.2 或 192.168.1.0/24 或 192.168.1.1-192.168.1.100" required style="min-height: 80px;"></textarea>
                    <small style="color: #666; font-size: 12px;">支持单个IP（如：192.168.1.100）、多个IP（逗号分隔，如：192.168.1.1,192.168.1.2,192.168.1.3）或IP段（如：192.168.1.0/24 或 192.168.1.1-192.168.1.100）</small>
                </div>
                <div class="form-group">
                    <label>说明</label>
                    <textarea id="edit-description" placeholder="请输入说明"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    
</body>
</html>

