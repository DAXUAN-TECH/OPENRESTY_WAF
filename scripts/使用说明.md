# 安装脚本使用说明

## 脚本选择

项目提供了两个安装脚本，**推荐使用 `install_geoip.sh`**：

### 1. `install_geoip.sh` ⭐ **推荐使用**

**功能最全面，支持所有下载方式**

- ✅ 支持 Account ID + License Key（推荐）
- ✅ 支持 Permalink URL
- ✅ 自动处理 Basic Authentication
- ✅ 自动跟随重定向
- ✅ 完整的错误处理和提示

**使用方法：**

```bash
# 方式 1：提供 Account ID 和 License Key（推荐）
sudo ./scripts/install_geoip.sh ACCOUNT_ID LICENSE_KEY

# 方式 2：交互式输入
sudo ./scripts/install_geoip.sh
# 会提示输入 Account ID 和 License Key

# 方式 3：使用 Permalink URL（仍需要认证）
sudo ./scripts/install_geoip.sh 'https://download.maxmind.com/geoip/databases/GeoLite2-City/download?suffix=tar.gz'
```

### 2. `install_geoip_permalink.sh` ⚠️ **备选方案**

**仅支持 Permalink URL，功能有限**

- ⚠️ 仅支持 Permalink URL
- ⚠️ 需要手动处理认证（可能失败）
- ⚠️ 功能较少

**使用方法：**

```bash
sudo ./scripts/install_geoip_permalink.sh 'PERMALINK_URL'
```

**注意**：此脚本可能无法正常工作，因为 Permalink URL 仍然需要认证。

## 推荐使用方式

### 最佳实践：使用 `install_geoip.sh` + Account ID + License Key

```bash
# 1. 获取 Account ID 和 License Key
#    访问：https://www.maxmind.com/en/accounts/current

# 2. 运行安装脚本
sudo ./scripts/install_geoip.sh YOUR_ACCOUNT_ID YOUR_LICENSE_KEY

# 3. 等待安装完成
```

## 获取凭证

### Account ID

1. 登录 [MaxMind 账号页面](https://www.maxmind.com/en/accounts/current)
2. 在账号信息中可以找到 Account ID

### License Key

1. 访问 [License Keys 页面](https://www.maxmind.com/en/accounts/current/license-key)
2. 查看现有的 License Key 或创建新的

## 常见问题

### Q: 两个脚本有什么区别？

**A:** 
- `install_geoip.sh`：功能全面，支持所有下载方式，自动处理认证
- `install_geoip_permalink.sh`：仅支持 Permalink URL，功能有限

**建议**：只使用 `install_geoip.sh`

### Q: 应该使用哪个脚本？

**A:** **推荐使用 `install_geoip.sh`**，因为它：
- 功能更全面
- 自动处理认证
- 错误提示更详细
- 支持多种下载方式

### Q: Permalink URL 还需要认证吗？

**A:** 是的，根据 MaxMind 最新文档，即使使用 Permalink URL，仍然需要使用 Account ID 和 License Key 进行 Basic Authentication。

### Q: 为什么 `install_geoip_permalink.sh` 可能失败？

**A:** 因为 Permalink URL 仍然需要认证，而该脚本没有自动处理认证功能，所以可能会下载失败。

## 总结

- ✅ **使用 `install_geoip.sh`** - 功能全面，推荐使用
- ❌ **不使用 `install_geoip_permalink.sh`** - 功能有限，可能无法正常工作

